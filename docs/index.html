<!DOCTYPE html>
<head>
	<title>Diamonds Team (тест)</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans+Symbols:wght@100..900&display=swap" rel="stylesheet">
</head>

<style>
	img {
		margin-left: auto; margin-right: auto;
		border-radius: 40px;
		display: block;
	}

	button {
		font-family: 'Montserrat', sans-serif;
		font-size: 50px;
		font-weight: bold;
		border-radius: 20px;
		color: black;	
		margin-left: auto; margin-right: auto;
		display: block;
	}

	input {
		font-family: 'Montserrat', sans-serif;
		font-size: 50px;
		border-radius: 20px;
		color: black;
		margin-left: auto; margin-right: auto;
		display: block;
	}
</style>

<body>    
	<link rel="stylesheet" href="https://pyscript.net/releases/2024.10.2/core.css">
	<script type="module" src="https://pyscript.net/releases/2024.10.2/core.js"></script>
	<div class="center-block">
	<img
		src="./DT.jpg"
		alt="Diamonds Team иконка"
		width="40%"><br>

	<input id = 'inf' placeholder = 'Введи свой тег-id'><br>
	<button id = 'MyButton'>Ввести</button>
		
	<py-script>
		<script type="py">
			import brawlstats as bs
			from js import document
			from pyodide.ffi import create_proxy
			def on_button_click(event):
				input_value = document.getElementById("inf").value
				print(f"Значение: {input_value}")
			
			
			brawl = bs.Client ('eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiIsImtpZCI6IjI4YTMxOGY3LTAwMDAtYTFlYi03ZmExLTJjNzQzM2M2Y2NhNSJ9.eyJpc3MiOiJzdXBlcmNlbGwiLCJhdWQiOiJzdXBlcmNlbGw6Z2FtZWFwaSIsImp0aSI6ImY3NjkwZmY5LTRmMDgtNGMyOS1iODdmLTBmNzhlY2EyMzg1ZCIsImlhdCI6MTczMzU2NDQ5OSwic3ViIjoiZGV2ZWxvcGVyLzkxOTJhMTM4LTAzZmQtNWFkNy1iNjFkLWNkNzU1NGE0NmIyMyIsInNjb3BlcyI6WyJicmF3bHN0YXJzIl0sImxpbWl0cyI6W3sidGllciI6ImRldmVsb3Blci9zaWx2ZXIiLCJ0eXBlIjoidGhyb3R0bGluZyJ9LHsiY2lkcnMiOlsiNS41My4xMTMuMjAxIl0sInR5cGUiOiJjbGllbnQifV19.tkrpGkqeo5YNpIJNFaqqRnhk1YqeC1DCi-YJivqzcZIjIht1dQtlvbhFiIlq_g-7LeLU0fddjHP7WNqusLA5QQ')
			
			while True:
			    try:
			        danni = document.getElementById("inf").value
			        prof = brawl.get_profile (danni)
			        club = prof ['club']
			        print (prof ['name'], ' | ', club ['name'], ' | ', prof ['trophies'])
			    except:
			        danni = input ('Данные не корректны. Попробуйте ещё раз: ')
			        prof = brawl.get_profile (danni)
			        club = prof ['club']
			        print (prof ['name'], ' | ', club ['teg'], ' | ', prof ['trophies'], ' | ', prof ['brawlers'])
			
			proxy = create_proxy(on_button_click)
			document.getElementById("MyButton").addEventListener("click", proxy)
		</script>
	<py-script>
	</div>
	
</body>
</html>	
